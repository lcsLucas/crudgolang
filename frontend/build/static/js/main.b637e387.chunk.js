(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{39:function(e,t,a){e.exports=a(55)},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(33),l=a.n(o),c=a(30),s=a(19),i=a(20),u=a(16),m=a(2),d=a(6),p=a.n(d),b=a(10),E=a(7),h=Object(n.createContext)();function f(e){var t=e.children,a=Object(n.useState)({status:!1,response:{}}),o=Object(E.a)(a,2),l=o[0],c=o[1],s=function(){var e=Object(b.a)(p.a.mark((function e(){var t,a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=14;break}return e.prev=2,a="".concat("http://localhost:9000","/check-token"),e.next=6,fetch(a,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true",Authorization:"Bearer ".concat(t)}});case 6:(n=e.sent).ok&&200===n.status&&c({status:!0,response:t}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),c({status:!1,response:{}}),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){s()}),[]);var i=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="".concat("http://localhost:9000","/login"),e.next=4,fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:t});case 4:return e.next=6,e.sent.json();case 6:n=e.sent,c({status:!n.error,response:n}),n.error||localStorage.setItem("token",n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c({status:!1,response:{error:"N\xe3o foi poss\xedvel fazer a requisi\xe7\xe3o, tente novamente"}});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(h.Provider,{value:{URLAPI:"http://localhost:9000",authenticated:l.status,authResponse:l.response,handleLogin:i,handleLogout:function(){c({status:!1,response:{}}),localStorage.removeItem("token")}}},t)}function v(){var e=Object(s.a)(["\n    border-bottom: 1px solid #EEE;\n    padding-bottom: 1rem;\n    margin-bottom: 1rem;\n    \n    h3 {\n        font-weight: 500;\n        margin: 0\n    }\n"]);return v=function(){return e},e}var g=i.b.div(v()),j=a(11),O=a.n(j),N=(a(47),a(48),a(49),function(e){var t=e.clear,a=e.conteudo,o=e.initEditor,l=e.setInitEditor,c=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(!o){l(!0),window.jQuery=O.a,window.jquery=O.a,window.$=O.a;var e=O()(c.current),n=document.createElement("textarea");n.innerHTML=a,e.val(n.innerText),(t||e)&&e.summernote("destroy"),e.summernote({height:200,lang:"pt-BR"})}return function(){null}})),r.a.createElement("textarea",{ref:c,id:"summernote",name:"conteudo"})}),x=function(e){var t=e.titulo,a=e.data,o=e.conteudo,l=e.statusForm,c=e.changeStatusForm,s=e.postEdit,i=e.refreshList,u=e.changeTitulo,m=e.changeData,d=e.changeConteudo,f=e.initEditor,v=e.setInitEditor,j=Object(n.useContext)(h),x=j.authResponse,w=j.URLAPI,y=Object(n.useState)({}),C=Object(E.a)(y,2),k=C[0],S=C[1],A=Object(n.useState)(!1),F=Object(E.a)(A,2),L=F[0],P=F[1],T=Object(n.useState)(!1),I=Object(E.a)(T,2),z=I[0],D=I[1],R=function(e){var t,a,n,r,o,l;for(o={},a=new FormData(e).entries();n=a.next().value;){if(r=n[0],l=n[1],"id"===r&&(l=+l),"data_publicacao"===r){var c=new Date;l=l+"T"+("0"+c.getHours()).substr(-2)+":"+("0"+c.getMinutes()).substr(-2)+":"+("0"+c.getSeconds()).substr(-2)+"Z"}"conteudo"===r&&d(l),Object.prototype.hasOwnProperty.call(o,r)?(t=o[r],Array.isArray(t)||(t=o[r]=[t]),t.push(l)):o[r]=l}return JSON.stringify(o)},B=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="".concat(w,"/posts").concat("edit"===l?"/"+s.id:""),e.next=4,fetch(a,{method:"".concat("novo"===l?"POST":"PUT"),credentials:"same-origin",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true",Authorization:"Bearer ".concat(x)},body:R(t)});case 4:return e.next=6,e.sent.json();case 6:n=e.sent,S({enabled:!0,status:!n.error,msg:n.error?"N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o (".concat(n.error,")"):"Post ".concat("novo"===l?"cadastrado":"alterado"," com sucesso")}),n.error||(u(""),m(""),d(""),c("novo"),D(!0),v(!1),i(),O()("html, body").animate({scrollTop:0},800)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),S({enabled:!0,status:!1,msg:"N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o (".concat(e.t0,")")});case 14:P(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,k.status&&r.a.createElement("div",{className:"alert alert-success alert-dismissible fade show mt-4",role:"alert"},r.a.createElement("strong",null,"Sucesso!")," ",k.msg,r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),k.enabled&&!k.status&&r.a.createElement("div",{className:"alert alert-danger alert-dismissible fade show mt-4",role:"alert"},r.a.createElement("strong",null,"Erro!")," ",k.msg,r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"content"},r.a.createElement(g,{className:"header"},r.a.createElement("h3",null,"edit"===l?'Editar Post "'.concat(s.titulo,'"'):"Gerenciar Posts")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),P(!0),B(e.target)}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-9"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"T\xedtulo do Post:"),r.a.createElement("input",{value:t,onChange:function(e){e.preventDefault(),u(e.target.value)},name:"titulo",required:!0,className:"form-control"}),"edit"===l?r.a.createElement("input",{name:"id",type:"hidden",defaultValue:s.id}):void 0)),r.a.createElement("div",{className:"col-12 col-lg-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Data do Post:"),r.a.createElement("input",{value:a,onChange:function(e){e.preventDefault(),m(e.target.value)},type:"date",name:"data_publicacao",required:!0,className:"form-control"}))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Conte\xfado do Post:"),r.a.createElement(N,{initEditor:f,setInitEditor:function(e){v(e)},clear:z,conteudo:o}))),r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{disabled:L,className:"btn btn-primary d-block ml-auto px-5 py-2 font-weight-bold text-uppercase"},"edit"===l?"Alterar":"Cadastrar"))))))},w=function(e){var t=e.posts,a=e.refreshList,o=e.onChangeStatusForm,l=Object(n.useContext)(h),c=l.authResponse,s=l.URLAPI,i=function(e){var t="",a=e.data.split("T"),n=a[0].split("-");return t+=n[2]+"/"+n[1]+"/"+n[0],t+=" "+a[1].substr(0,8)},u=function(e){var t=e.post,n=function(){var e=Object(b.a)(p.a.mark((function e(){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(s,"/posts/").concat(t.id),e.next=4,fetch(n,{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true",Authorization:"Bearer ".concat(c)}});case 4:(r=e.sent).ok&&204===r.status&&a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},t.id),r.a.createElement("td",null,t.titulo),r.a.createElement("td",null,r.a.createElement(i,{data:t.data_publicacao})),r.a.createElement("td",null,t.usuario.nome),r.a.createElement("td",{className:"text-center"},r.a.createElement("button",{onClick:function(){o(t)},className:"btn btn-primary"},r.a.createElement("svg",{width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.a.createElement("path",{fill:"currentColor",d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"}))),r.a.createElement("button",{onClick:n,className:"btn btn-danger ml-2"},r.a.createElement("svg",{width:"1.1em",height:"1.1em",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},r.a.createElement("path",{fill:"currentColor",d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})))))};return r.a.createElement("div",{className:"content"},r.a.createElement(g,{className:"header"},r.a.createElement("h3",null,"Lista de Post")),r.a.createElement("table",{className:"table table-striped table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"border-top-0 text-center"},"ID"),r.a.createElement("th",{className:"border-top-0"},"T\xedtulo"),r.a.createElement("th",{className:"border-top-0"},"Data Publica\xe7\xe3o"),r.a.createElement("th",{className:"border-top-0"},"Autor"),r.a.createElement("th",{width:190,className:"border-top-0 text-center"},"A\xe7\xf5es"))),r.a.createElement("tbody",null,0===t.length&&r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center",colSpan:"4"},"Nenhum Post encontrado.")),t.length>0&&t.map((function(e,t){return r.a.createElement(u,{post:e,key:t})})))))},y=function(){var e=Object(n.useContext)(h).URLAPI,t=Object(n.useState)("novo"),a=Object(E.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)([]),s=Object(E.a)(c,2),i=s[0],u=s[1],m=Object(n.useState)({}),d=Object(E.a)(m,2),f=d[0],v=d[1],g=Object(n.useState)(""),j=Object(E.a)(g,2),O=j[0],N=j[1],y=Object(n.useState)(""),C=Object(E.a)(y,2),k=C[0],S=C[1],A=Object(n.useState)(""),F=Object(E.a)(A,2),L=F[0],P=F[1],T=Object(n.useState)(!1),I=Object(E.a)(T,2),z=I[0],D=I[1],R=function(){var t=Object(b.a)(p.a.mark((function t(){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(e,"/posts"),t.prev=1,t.next=4,fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}});case 4:return t.next=6,t.sent.json();case 6:n=t.sent,u(n),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){R()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{titulo:O,data:k,conteudo:L,changeTitulo:N,changeData:S,changeConteudo:P,statusForm:o,changeStatusForm:l,postEdit:f,refreshList:R,initEditor:z,setInitEditor:D}),r.a.createElement(w,{onChangeStatusForm:function(e){l("edit"),N(e.titulo),S(e.data_publicacao.substr(0,10)),P(e.conteudo),v(e),D(!1)},refreshList:R,posts:i}))},C=a(15),k=function(e){var t={};return e.senha||(t.senha="Esse campo \xe9 obrigat\xf3rio"),e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="O email informado \xe9 inv\xe1lido"):t.email="Esse campo \xe9 obrigat\xf3rio",t},S=function(){var e=Object(n.useContext)(h),t=e.authenticated,a=e.authResponse,o=e.handleLogin;return r.a.createElement(r.a.Fragment,null,!t&&a.error&&r.a.createElement("div",{className:"alert alert-danger alert-dismissible fade show mt-4",role:"alert"},r.a.createElement("strong",null,"Erro!")," ",a.error,r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"content"},r.a.createElement(g,{className:"header"},r.a.createElement("h3",null,"Login")),r.a.createElement(C.d,{initialValues:{email:"",senha:""},validate:k,onSubmit:function(e){o(JSON.stringify(e))}},r.a.createElement(C.c,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement(C.b,{name:"email",type:"email",required:!0,className:"form-control"}),r.a.createElement("span",{className:"error"},r.a.createElement(C.a,{name:"email"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"senha"},"Senha:"),r.a.createElement(C.b,{name:"senha",type:"password",required:!0,className:"form-control"}),r.a.createElement("span",{className:"error"},r.a.createElement(C.a,{name:"senha"}))),r.a.createElement("button",{className:"btn btn-primary d-block ml-auto px-5 py-2 font-weight-bold text-uppercase"},"Login")))))},A=function(){var e=Object(n.useContext)(h).handleLogout;return Object(n.useEffect)((function(){e()}),[]),null};function F(){var e=Object(s.a)(["\n    background: #FFF;\n    border-radius: .4rem;\n    border: 1px solid #EFEFEF;\n\n    .nav-link {\n        padding: .9rem 1.7rem\n    }\n\n"]);return F=function(){return e},e}function L(){var e=Object(s.a)(["\n    html {\n        scroll-behavior: smooth;\n    }\n    body {\n        background: #F6F6F6;\n        font-family: 'Poppins', sans-serif;\n    }\n    html, body {\n        height: 100%\n    }\n    #root {\n        min-height: 100%\n    }\n    .container {\n        margin-top: 2rem;\n        margin-bottom: 2rem\n    }\n    .content {\n        background: #FFF;\n        border-radius: .4rem;\n        border: 1px solid #EFEFEF;\n        margin: 1.5rem 0 0;\n        padding: 1rem 1.5rem 1.5rem\n    }\n    table.table th, table.table td {\n        vertical-align: middle\n    }\n\n    label {\n        font-weight: bold;\n        font-size: 1.03rem;\n        letter-spacing: .015rem;\n        color: #333\n    }\n\n    .form-control {\n        border: 2px solid #E3E3E3;\n        border-radius: 6px !important;\n        height: 2.8rem;\n        box-shadow: none !important;\n    }\n\n    .error {\n        color: #dc3545;\n        font-size: .75rem;\n        display: block;\n        margin: .3rem 0 0\n    }\n"]);return L=function(){return e},e}var P=Object(i.a)(L()),T=i.b.ul(F()),I=function(){return r.a.createElement(f,null,r.a.createElement(z,null))};function z(){var e=Object(n.useContext)(h).authenticated;return r.a.createElement(u.a,null,r.a.createElement(P,null),r.a.createElement("div",{className:"container"},r.a.createElement(T,{className:"nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/posts"},"Posts")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/usuarios"},"Usu\xe1rios")),e&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(u.b,{className:"nav-link",to:"/logout"},"Logout"))),r.a.createElement(m.d,null,r.a.createElement(U,{exact:!0,path:"/"},r.a.createElement(D,null)),r.a.createElement(U,{path:"/posts"},r.a.createElement(y,null)),r.a.createElement(m.b,{path:"/usuarios"},r.a.createElement(R,null)),r.a.createElement(B,{path:"/login"},r.a.createElement(S,null)),r.a.createElement(m.b,{path:"/logout"},r.a.createElement(A,null),r.a.createElement(m.a,{to:"/login"})))))}function D(){var e=Object(n.useContext)(h).authenticated;return r.a.createElement("div",{className:"content"},r.a.createElement(g,null,r.a.createElement("h3",null,"Home")),e?"Logado":"Logout")}function R(){return r.a.createElement("div",{className:"content"},r.a.createElement(g,null,r.a.createElement("h3",null,"Usu\xe1rios")))}function B(e){var t=e.children,a=Object(c.a)(e,["children"]),o=Object(n.useContext)(h).authenticated;return r.a.createElement(m.b,Object.assign({},a,{render:function(e){var a=e.location;return o?r.a.createElement(m.a,{to:{pathname:"/",state:{from:a}}}):t}}))}function U(e){var t=e.children,a=Object(c.a)(e,["children"]),o=Object(n.useContext)(h).authenticated;return r.a.createElement(m.b,Object.assign({},a,{render:function(e){var a=e.location;return o?t:r.a.createElement(m.a,{to:{pathname:"/login",state:{from:a}}})}}))}a(54);l.a.render(r.a.createElement(I,null),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.b637e387.chunk.js.map