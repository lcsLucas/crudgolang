(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{29:function(e,t,a){e.exports=a(44)},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),l=a.n(c),o=a(21),s=a(13),u=a(14),i=a(10),m=a(2),d=a(4),p=a.n(d),b=a(7),E=a(6),h=Object(n.createContext)();function f(e){var t=e.children,a=Object(n.useState)({status:!1,response:{}}),c=Object(E.a)(a,2),l=c[0],o=c[1],s=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="".concat("http://localhost:9000","/login"),e.next=4,fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:t});case 4:return e.next=6,e.sent.json();case 6:n=e.sent,o({status:!n.error,response:n}),n.error||localStorage.setItem("token",JSON.stringify(n)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),o({status:!1,response:{}});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(h.Provider,{value:{URLAPI:"http://localhost:9000",authenticated:l.status,authResponse:l.response,handleLogin:s}},t)}function v(){var e=Object(s.a)(["\n    border-bottom: 1px solid #EEE;\n    padding-bottom: 1rem;\n    margin-bottom: 1rem;\n    \n    h3 {\n        font-weight: 500;\n        margin: 0\n    }\n"]);return v=function(){return e},e}var g=u.b.div(v()),j=a(8),O=a.n(j),N=(a(37),a(38),a(39),function(e){var t=e.clear,a=e.conteudo,c=Object(n.useRef)(null);Object(n.useEffect)((function(){window.jQuery=O.a,window.jquery=O.a,window.$=O.a;var e=O()(c.current);return t&&e.summernote("destroy"),e.summernote({height:200,lang:"pt-BR"}),function(){e.summernote("destroy")}}));var l=document.createElement("textarea");return l.innerHTML=a,r.a.createElement("textarea",{value:l.innerText,ref:c,id:"summernote",name:"conteudo"})}),x=function(e){var t=e.titulo,a=e.data,c=e.conteudo,l=e.statusForm,o=e.changeStatusForm,s=e.postEdit,u=e.refreshList,i=e.changeTitulo,m=e.changeData,d=e.changeConteudo,f=Object(n.useContext)(h),v=f.authResponse,j=f.URLAPI,O=Object(n.useState)({}),x=Object(E.a)(O,2),w=x[0],y=x[1],C=Object(n.useState)(!1),k=Object(E.a)(C,2),F=k[0],L=k[1],S=Object(n.useState)(!1),A=Object(E.a)(S,2),P=A[0],T=A[1],D=function(e){var t,a,n,r,c,l;for(c={},a=new FormData(e).entries();n=a.next().value;){if(r=n[0],l=n[1],"id"===r&&(l=+l),"data_publicacao"===r){var o=new Date;l=l+"T"+("0"+o.getHours()).substr(-2)+":"+("0"+o.getMinutes()).substr(-2)+":"+("0"+o.getSeconds()).substr(-2)+"Z"}"conteudo"===r&&d(l),Object.prototype.hasOwnProperty.call(c,r)?(t=c[r],Array.isArray(t)||(t=c[r]=[t]),t.push(l)):c[r]=l}return JSON.stringify(c)},R=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="".concat(j,"/posts").concat("edit"===l?"/"+s.id:""),e.next=4,fetch(a,{method:"".concat("novo"===l?"POST":"PUT"),credentials:"same-origin",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true",Authorization:"Bearer ".concat(v)},body:D(t)});case 4:return e.next=6,e.sent.json();case 6:n=e.sent,y({enabled:!0,status:!n.error,msg:n.error?"N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o (".concat(n.error,")"):"Post ".concat("novo"===l?"cadastrado":"alterado"," com sucesso")}),n.error||(i(""),m(""),d(""),o("novo"),T(!0),u()),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),y({enabled:!0,status:!1,msg:"N\xe3o foi poss\xedvel realizar a opera\xe7\xe3o (".concat(e.t0,")")});case 14:L(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,w.status&&r.a.createElement("div",{className:"alert alert-success alert-dismissible fade show mt-4",role:"alert"},r.a.createElement("strong",null,"Sucesso!")," ",w.msg,r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),w.enabled&&!w.status&&r.a.createElement("div",{className:"alert alert-danger alert-dismissible fade show mt-4",role:"alert"},r.a.createElement("strong",null,"Erro!")," ",w.msg,r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"content"},r.a.createElement(g,{className:"header"},r.a.createElement("h3",null,"edit"===l?'Editar Post "'.concat(s.titulo,'"'):"Gerenciar Posts")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),L(!0),R(e.target)}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-lg-9"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"T\xedtulo do Post:"),r.a.createElement("input",{value:t,onChange:function(e){e.preventDefault(),i(e.target.value)},name:"titulo",required:!0,className:"form-control"}),"edit"===l?r.a.createElement("input",{name:"id",type:"hidden",defaultValue:s.id}):void 0)),r.a.createElement("div",{className:"col-12 col-lg-3"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Data do Post:"),r.a.createElement("input",{value:a,onChange:function(e){e.preventDefault(),m(e.target.value)},type:"date",name:"data_publicacao",required:!0,className:"form-control"}))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Conte\xfado do Post:"),r.a.createElement(N,{clear:P,conteudo:c}))),r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{disabled:F,className:"btn btn-primary d-block ml-auto px-5 py-2 font-weight-bold text-uppercase"},"edit"===l?"Alterar":"Cadastrar"))))))},w=function(e){var t=e.posts,a=e.refreshList,c=e.onChangeStatusForm,l=Object(n.useContext)(h),o=l.authResponse,s=l.URLAPI,u=function(e){var t="",a=e.data.split("T"),n=a[0].split("-");return t+=n[2]+"/"+n[1]+"/"+n[0],t+=" "+a[1].substr(0,8)},i=function(e){var t=e.post,n=function(){var e=Object(b.a)(p.a.mark((function e(){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(s,"/posts/").concat(t.id),e.next=4,fetch(n,{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":"true",Authorization:"Bearer ".concat(o)}});case 4:(r=e.sent).ok&&204===r.status&&a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},t.id),r.a.createElement("td",null,t.titulo),r.a.createElement("td",null,r.a.createElement(u,{data:t.data_publicacao})),r.a.createElement("td",{className:"text-center"},r.a.createElement("button",{onClick:function(){c(t)},className:"btn btn-primary"},r.a.createElement("svg",{width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.a.createElement("path",{fill:"currentColor",d:"M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"}))),r.a.createElement("button",{onClick:n,className:"btn btn-danger ml-2"},r.a.createElement("svg",{width:"1.1em",height:"1.1em",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},r.a.createElement("path",{fill:"currentColor",d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})))))};return r.a.createElement("div",{className:"content"},r.a.createElement(g,{className:"header"},r.a.createElement("h3",null,"Lista de Post")),r.a.createElement("table",{className:"table table-striped table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"border-top-0 text-center"},"ID"),r.a.createElement("th",{className:"border-top-0"},"T\xedtulo"),r.a.createElement("th",{className:"border-top-0"},"Data Publica\xe7\xe3o"),r.a.createElement("th",{width:190,className:"border-top-0 text-center"},"A\xe7\xf5es"))),r.a.createElement("tbody",null,0===t.length&&r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center",colSpan:"4"},"Nenhum Post encontrado.")),t.length>0&&t.map((function(e,t){return r.a.createElement(i,{post:e,key:t})})))))},y=function(){var e=Object(n.useContext)(h).URLAPI,t=Object(n.useState)("novo"),a=Object(E.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)([]),s=Object(E.a)(o,2),u=s[0],i=s[1],m=Object(n.useState)({}),d=Object(E.a)(m,2),f=d[0],v=d[1],g=Object(n.useState)(""),j=Object(E.a)(g,2),O=j[0],N=j[1],y=Object(n.useState)(""),C=Object(E.a)(y,2),k=C[0],F=C[1],L=Object(n.useState)(""),S=Object(E.a)(L,2),A=S[0],P=S[1],T=function(){var t=Object(b.a)(p.a.mark((function t(){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(e,"/posts"),t.prev=1,t.next=4,fetch(a,{method:"GET",headers:{"Content-Type":"application/json"}});case 4:return t.next=6,t.sent.json();case 6:n=t.sent,i(n),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){T()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{titulo:O,data:k,conteudo:A,changeTitulo:N,changeData:F,changeConteudo:P,statusForm:c,changeStatusForm:l,postEdit:f,refreshList:T}),r.a.createElement(w,{onChangeStatusForm:function(e){l("edit"),N(e.titulo),F(e.data_publicacao.substr(0,10)),P(e.conteudo),v(e)},refreshList:T,posts:u}))},C=function(e){var t,a,n,r,c,l;for(c={},a=new FormData(e).entries();n=a.next().value;)r=n[0],l=n[1],Object.prototype.hasOwnProperty.call(c,r)?(t=c[r],Array.isArray(t)||(t=c[r]=[t]),t.push(l)):c[r]=l;return JSON.stringify(c)},k=function(){var e=Object(n.useContext)(h),t=e.authenticated,a=e.authResponse,c=e.handleLogin,l=function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a=C(t.target),c(a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,!t&&a.error&&r.a.createElement("div",{className:"alert alert-danger alert-dismissible fade show mt-4",role:"alert"},r.a.createElement("strong",null,"Erro!")," ",a.error,r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"content"},r.a.createElement(g,{className:"header"},r.a.createElement("h3",null,"Login")),r.a.createElement("form",{onSubmit:l},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email:"),r.a.createElement("input",{name:"email",type:"email",required:!0,className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Senha:"),r.a.createElement("input",{name:"senha",type:"password",required:!0,className:"form-control"})),r.a.createElement("button",{className:"btn btn-primary d-block ml-auto px-5 py-2 font-weight-bold text-uppercase"},"Login"))))};function F(){var e=Object(s.a)(["\n    background: #FFF;\n    border-radius: .4rem;\n    border: 1px solid #EFEFEF;\n\n    .nav-link {\n        padding: .9rem 1.7rem\n    }\n\n"]);return F=function(){return e},e}function L(){var e=Object(s.a)(["\n    body {\n        background: #F6F6F6\n    }\n    html, body {\n        height: 100%\n    }\n    #root {\n        min-height: 100%\n    }\n    .container {\n        margin-top: 2rem;\n        margin-bottom: 2rem\n    }\n    .content {\n        background: #FFF;\n        border-radius: .4rem;\n        border: 1px solid #EFEFEF;\n        margin: 1.5rem 0 0;\n        padding: 1rem 1.5rem 1.5rem\n    }\n    table.table th, table.table td {\n        vertical-align: middle\n    }\n"]);return L=function(){return e},e}var S=Object(u.a)(L()),A=u.b.ul(F()),P=function(){return r.a.createElement(f,null,r.a.createElement(T,null))};function T(){var e=Object(n.useContext)(h).authenticated;return console.log(e),r.a.createElement(i.a,null,r.a.createElement(S,null),r.a.createElement("div",{className:"container"},r.a.createElement(A,{className:"nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{className:"nav-link",to:"/posts"},"Posts")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{className:"nav-link",to:"/usuarios"},"Usu\xe1rios")),e&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{className:"nav-link",to:"/logout"},"Logout"))),r.a.createElement(m.d,null,r.a.createElement(U,{exact:!0,path:"/"},r.a.createElement(R,null)),r.a.createElement(U,{path:"/posts"},r.a.createElement(y,null)),r.a.createElement(m.b,{path:"/usuarios"},r.a.createElement(z,null)),r.a.createElement(I,{path:"/login"},r.a.createElement(k,null)),r.a.createElement(m.b,{path:"/logout"},r.a.createElement(D,null)))))}function D(){var e=Object(n.useContext)(h).handleLogout;return console.log(e),null}function R(){var e=Object(n.useContext)(h).authenticated;return r.a.createElement("div",{className:"content"},r.a.createElement(g,null,r.a.createElement("h3",null,"Home")),e?"Logado":"Logout")}function z(){return r.a.createElement("div",{className:"content"},r.a.createElement(g,null,r.a.createElement("h3",null,"Usu\xe1rios")))}function I(e){var t=e.children,a=Object(o.a)(e,["children"]),c=Object(n.useContext)(h).authenticated;return r.a.createElement(m.b,Object.assign({},a,{render:function(e){var a=e.location;return c?r.a.createElement(m.a,{to:{pathname:"/",state:{from:a}}}):t}}))}function U(e){var t=e.children,a=Object(o.a)(e,["children"]),c=Object(n.useContext)(h).authenticated;return r.a.createElement(m.b,Object.assign({},a,{render:function(e){var a=e.location;return c?t:r.a.createElement(m.a,{to:{pathname:"/login",state:{from:a}}})}}))}a(43);l.a.render(r.a.createElement(P,null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.434c7d67.chunk.js.map